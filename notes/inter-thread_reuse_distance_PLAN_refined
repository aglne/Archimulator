Inter-Thread Reuse Distance Prediction Based Shared LLC Replacement for Feedback Directed Helper Threaded Data Prefetching on CMPs

1. Motivation
	1. Recently proposed reuse(rereference/next-use) distance prediction based LLC replacement policies for CMPs have achieved good results for sequential workloads without helper threaded data prefetching enabled,
	which are good online approximations of Belady's offline optimal cache replacement policy (i.e., evict the cache line that will be accessed in the furtherest future) (ICCD 2007, HiPC 2008, ISCA 2010, ICS 2010 from Zhejiang Univ.)
	
	2. however, (intra-thread) reuse distance is prohibitively high for loads issued from delinquent PCs in programs that exhibit the streaming data access pattern,
	 which renders reuse distance prediction based LLC replacement useless for programs such as mst
	
	3. fortunately, for the helper threaded data prefetching scheme that we adopted for accelerating mst, a new metric called inter-thread reuse distance can be used to monitor the quality of HT and help synchronize HT with MT
		a. low HT-MT inter-thread reuse distance is an indicator of good performance of the HT scheme
		b. high HT-MT inter-thread reuse distance implies HT and MT is not synchronized caused by either little synchronization or the work in HT and MT is not balanced
		c. medium HT-MT inter-thread reuse distance signals those potentially late HT prefetches that, depend on the LLC replacement policy, may be useful or not for MT

2. Inter-Thread Reuse distance Based Quality Assessment of the HT scheme
	under the LRU LLC replacement policy, for LLC misses that issued from delinquent PCs in either in MT or HT:
	
	The value of HT-MT inter-thread reuse distance:
		low => useful prefetches
		medium => potentially late prefetches
		high => useless prefetches		
	
	The value of MT-HT inter-thread reuse distance:
		low => late prefetches, indicating HT should reduce its volume of data prefetched to keep pace with MT (e.g., increase lookahead or stride)
		medium => very late prefetches, indicating HT should synchronize with MT
		high => MT misses that are not covered by HT loads
		
3. Inter-Thread Reuse Distance (ITRD) Monitoring and Prediction Mechanisms
	for each program phase separated by two consecutive synchronizations,
		in the end of the program phase:
			ITRD = 1/2 * previous_ITRD + 1/2 * ITRD_in_the_current_phase
		
		a confidence counter with a threshold value of 10 and maximum value of 20 (?) to indicate whether the pace of the HT is:
			a. far before
			b. before
			c. after
			d. far after
			that of MT...TODO!!!!!!!!!!!!!!!!!

4. Inter-Thread Reuse Distance Based LLC Replacement for the HT scheme
	cache block pinning / replacement ownership enhanced victim selection (?)
		an incoming HT miss should try its best to not evict any cache block that is predicted to be used by MT? useful?? I'm not sure

	An additional HT bit per L2 line
		each cache line has an additional HT bit indicating the line is brought by HT and has not been used by MT yet    
		when a cache line marked by HT is referenced by MT, it is unmarked
	
	insertion position of an L2 read miss issued from delinquent PCs and marked as HT, if its value of predicted HT-MT reuse distance:
		very high => just bypass the L2
		high => LRU position
		medium => middle position or 1/4 LRU position
		low => MRU position
		cannot be determined => LRU position
		
	insertion position of an L2 read miss issued from delinquent PCs and not marked as HT:
		LRU position
	
	remaining cases:
		MRU position
		
5. Inter-Thread Reuse Distance Based feedback directed synchronization triggering and aggressiveness adjustment for the HT scheme
	hardware triggered synchronization of HT with MT: 
		based on the already implemented pseudocall mechanism that pass parameters between the program and the processor in some unused registers by the ADDU MIPS instruction with predefined special parameters
		A register based polling process is used to let the HT periodically ask the processor if it need to synchronize with MT		
	
	dynamic HT aggressivenss adjustment: 
		parameters for adjusting the aggressiveness of the HT: 
			lookahead
			stride
